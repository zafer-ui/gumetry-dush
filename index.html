<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Bölümlük Tek Tıkla Koşucu (Level Dash)</title>
    
    <style>
        /* CSS Kodları Başlangıcı: Önceki sürümle aynı estetik */
        body {
            font-family: 'Arial Black', Gadget, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #1c1c1c, #444);
            color: #ecf0f1;
            overflow: hidden;
            user-select: none;
            touch-action: manipulation;
        }

        #game-container {
            background-color: #2c3e50;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.6);
            padding: 20px;
            width: 95vw;
            max-width: 800px;
            text-align: center;
        }

        #game-screen {
            width: 100%;
            height: 300px;
            background-color: #1a1a1a;
            border: 5px solid #f1c40f;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        #player {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #3498db;
            left: 50px;
            bottom: 10px; /* Zemin yüksekliği */
            border: 3px solid #fff;
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.8);
            transition: transform 0.1s; /* Zıplama animasyonu için */
        }
        
        #player.rotate {
            transform: rotate(90deg);
        }

        .obstacle {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 40px solid #e74c3c;
            bottom: 10px; /* Zemin yüksekliği */
            transform: rotate(180deg); 
        }
        
        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 10px;
            background-color: #f39c12;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.5);
        }

        #score-display, #level-display {
            font-size: 1.8em;
            color: #2ecc71;
            margin: 10px 10px;
            display: inline-block;
        }

        #message {
            font-size: 2.2em;
            font-weight: bold;
            color: #e74c3c;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 8px;
            z-index: 100;
        }
        
        .hidden {
            display: none !important;
        }

        #start-button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5em;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
        }
        /* CSS Kodları Bitişi */
    </style>
</head>
<body>
    <div id="game-container">
        <h1>10 BÖLÜMLÜK KOŞUCU</h1>
        <div style="display: flex; justify-content: center;">
            <div id="level-display">Bölüm: <span id="level">1</span>/10</div>
            <div id="score-display">Puan: <span id="score">0</span></div>
        </div>
        
        <div id="game-screen">
            <div id="ground"></div>
            <div id="player"></div>
            <div id="message" class="hidden">BAŞLAMAK İÇİN TIKLA</div>
        </div>
        
        <button id="start-button">Oyunu Başlat / Yeniden Dene</button>
    </div>

    <script>
        // JavaScript Kodları Başlangıcı: Seviye Mantığı Eklendi
        
        const gameScreen = document.getElementById('game-screen');
        const player = document.getElementById('player');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const startButton = document.getElementById('start-button');
        const message = document.getElementById('message');

        // --- Oyun Değişkenleri ---
        let isJumping = false;
        let gameLoop;
        let obstacleTimeout;
        let score = 0;
        let currentLevel = 1;
        let gameRunning = false;
        let velocityY = 0; 
        const GROUND_LEVEL = 10;
        const JUMP_POWER = 15;
        const BASE_GRAVITY = 1;

        // Her seviye için zorluk ve engel dizisi
        const LEVELS = [
            { speed: 5, difficulty: 'easy', obstaclePattern: [1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1] },
            { speed: 6, difficulty: 'easy-med', obstaclePattern: [1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0] },
            { speed: 7, difficulty: 'medium', obstaclePattern: [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0] },
            { speed: 8, difficulty: 'medium-hard', obstaclePattern: [1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1] },
            { speed: 9, difficulty: 'hard', obstaclePattern: [1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1] },
            { speed: 10, difficulty: 'very-hard', obstaclePattern: [1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1] },
            { speed: 11, difficulty: 'extreme', obstaclePattern: [1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0] },
            { speed: 12, difficulty: 'insane', obstaclePattern: [1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1] },
            { speed: 13, difficulty: 'impossible', obstaclePattern: [1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0] },
            { speed: 14, difficulty: 'final-boss', obstaclePattern: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1] } // Maksimum zorluk
        ];
        
        let obstacleIndex = 0; // Hangi engelin sırada olduğunu tutar

        // --- Başlangıç ve Bitiş Fonksiyonları ---
        function startGame() {
            if (gameRunning) return;
            
            gameRunning = true;
            score = 0;
            currentLevel = 1;
            levelDisplay.textContent = currentLevel;
            scoreDisplay.textContent = score;
            player.style.bottom = `${GROUND_LEVEL}px`;
            startButton.classList.add('hidden');
            message.classList.add('hidden');
            clearObstacles();
            obstacleIndex = 0;

            gameLoop = setInterval(updateGame, 20); // Ana oyun döngüsü
            scheduleNextObstacle(); // İlk engeli zamanla
        }

        function endGame(win = false) {
            gameRunning = false;
            clearInterval(gameLoop);
            clearTimeout(obstacleTimeout);
            startButton.classList.remove('hidden');
            
            if (win) {
                message.textContent = `TEBRİKLER! TÜM BÖLÜMLERİ BİTİRDİN!`;
                message.style.color = '#2ecc71';
            } else {
                message.textContent = `OYUN BİTTİ! Bölüm ${currentLevel}'de takıldın. Puan: ${Math.floor(score / 50)}`;
                message.style.color = '#e74c3c';
            }
            message.classList.remove('hidden');
        }

        // --- Zıplama Mantığı ---
        function jump() {
            if (!isJumping && gameRunning) {
                isJumping = true;
                velocityY = JUMP_POWER;
            }
        }

        gameScreen.addEventListener('click', jump);
        startButton.addEventListener('click', startGame);

        // --- Engel Oluşturma ve Programlama ---
        function createObstacle() {
            const obstacle = document.createElement('div');
            obstacle.classList.add('obstacle');
            obstacle.style.right = '-40px'; 
            gameScreen.appendChild(obstacle);
        }

        function scheduleNextObstacle() {
            if (!gameRunning) return;

            const pattern = LEVELS[currentLevel - 1].obstaclePattern;
            
            // Bölüm sonuna ulaşıldıysa
            if (obstacleIndex >= pattern.length) {
                levelUp();
                return;
            }

            // Engelin çıkıp çıkmayacağını kontrol et
            if (pattern[obstacleIndex] === 1) {
                createObstacle();
            }

            obstacleIndex++;

            // Yeni engelin ne kadar süre sonra geleceğini belirle (Hızlandıkça aralık azalır)
            const speed = LEVELS[currentLevel - 1].speed;
            const interval = 1500 - (speed * 50); // Hız arttıkça bekleme süresi azalır
            
            obstacleTimeout = setTimeout(scheduleNextObstacle, interval);
        }
        
        // --- Bölüm Atlama Mantığı ---
        function levelUp() {
            clearTimeout(obstacleTimeout);
            clearObstacles();
            
            if (currentLevel < LEVELS.length) {
                currentLevel++;
                levelDisplay.textContent = currentLevel;
                
                message.textContent = `BÖLÜM ${currentLevel} BAŞLADI!`;
                message.style.color = '#f1c40f';
                message.classList.remove('hidden');
                
                // Kısa bir bekleme sonrası devam et
                setTimeout(() => {
                    message.classList.add('hidden');
                    obstacleIndex = 0;
                    scheduleNextObstacle();
                }, 1500);

            } else {
                endGame(true); // Tüm bölümler bitti
            }
        }

        // --- Oyun Güncelleme Döngüsü (Her Karede Çalışır) ---
        function updateGame() {
            const currentSpeed = LEVELS[currentLevel - 1].speed;

            // 1. Yerçekimini Uygula
            if (velocityY > -15) {
                velocityY -= BASE_GRAVITY;
            }
            let currentBottom = parseInt(player.style.bottom);
            player.style.bottom = `${currentBottom + velocityY}px`;

            // Zıplama animasyonu (Dönme)
            if (isJumping) {
                 player.classList.add('rotate');
            } else {
                 player.classList.remove('rotate');
            }


            // 2. Zemine İniş Kontrolü
            if (parseInt(player.style.bottom) <= GROUND_LEVEL) {
                player.style.bottom = `${GROUND_LEVEL}px`;
                isJumping = false;
                velocityY = 0;
            }
            
            // 3. Skor Artışı
            score += currentSpeed;
            scoreDisplay.textContent = Math.floor(score / 100); 

            // 4. Tüm Engelleri Kontrol Et ve Hareket Ettir
            document.querySelectorAll('.obstacle').forEach(obstacle => {
                let currentRight = parseInt(obstacle.style.right);
                
                obstacle.style.right = `${currentRight + currentSpeed}px`; // Hız seviyeye bağlı

                if (currentRight > gameScreen.offsetWidth + 50) {
                    obstacle.remove();
                }

                // Çarpışma Kontrolü
                checkCollision(obstacle);
            });
        }
        
        // --- Çarpışma Kontrolü ---
        function checkCollision(obstacle) {
            const playerRect = player.getBoundingClientRect();
            const obstacleRect = obstacle.getBoundingClientRect();

            // Basit AABB çarpışma kontrolü
            if (playerRect.right > obstacleRect.left &&
                playerRect.left < obstacleRect.right &&
                playerRect.bottom > obstacleRect.top + 10 && // Zemin yüksekliğini hesaba kat
                playerRect.top < obstacleRect.bottom) {
                
                 endGame(false);
            }
        }
        
        // --- Engel Temizleme ---
        function clearObstacles() {
            document.querySelectorAll('.obstacle').forEach(obs => obs.remove());
        }
        
        // Başlangıç mesajını göster
        message.classList.remove('hidden');
        message.textContent = "BAŞLAMAK İÇİN TIKLA";
        message.style.color = '#f1c40f';
        
        // JavaScript Kodları Bitişi
    </script>
</body>

</html>
