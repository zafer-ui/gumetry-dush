<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SÃ¼per TÄ±kla-ZÄ±pla Platformer</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #2c3e50; /* Koyu Mavi Arkaplan */
            font-family: sans-serif;
            color: #ecf0f1;
            flex-direction: column;
        }

        #gameCanvas {
            border: 5px solid #ecf0f1; /* AÃ§Ä±k KenarlÄ±k */
            background-color: #34495e; /* Daha Koyu Oyun AlanÄ± */
            cursor: pointer; /* TÄ±klanabilir olduÄŸunu belirtir */
            display: block;
        }

        #infoPanel {
            margin-top: 10px;
            font-size: 1.2em;
            text-align: center;
        }

        #startScreen, #endScreen {
            position: absolute;
            background-color: rgba(44, 62, 80, 0.95);
            width: 800px;
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 5px solid #ecf0f1;
            z-index: 10;
            text-align: center;
        }

        #startScreen button, #endScreen button {
            padding: 15px 30px;
            font-size: 1.5em;
            margin-top: 20px;
            background-color: #27ae60; /* YeÅŸil Buton */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #startScreen button:hover, #endScreen button:hover {
            background-color: #2ecc71;
        }
    </style>
</head>
<body>

    <div id="startScreen">
        <h1>SÃ¼per TÄ±kla-ZÄ±pla Platformer</h1>
        <p>Geometry Dash Benzeri!</p>
        <p>ZÄ±plamak iÃ§in **fareye sol tÄ±kla** veya **boÅŸluk (Space)** tuÅŸuna bas.</p>
        <button onclick="startGame()">Oyuna BaÅŸla</button>
    </div>

    <canvas id="gameCanvas" width="800" height="400"></canvas>

    <div id="infoPanel">
        BÃ¶lÃ¼m: <span id="currentLevel">1</span>
    </div>

    <div id="endScreen" style="display:none;">
        <h1 id="endMessage">BÃ¶lÃ¼m TamamlandÄ±!</h1>
        <p id="endDetail"></p>
        <button onclick="restartGame()">Tekrar Oyna</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const infoPanel = document.getElementById('infoPanel');
        const currentLevelSpan = document.getElementById('currentLevel');
        const startScreen = document.getElementById('startScreen');
        const endScreen = document.getElementById('endScreen');
        const endMessage = document.getElementById('endMessage');
        const endDetail = document.getElementById('endDetail');

        // --- Oyun AyarlarÄ± ---
        const PLAYER_SIZE = 20;
        const JUMP_VELOCITY = -10;
        const GRAVITY = 0.5;
        const GROUND_Y = canvas.height - 20;
        const GAME_SPEED = 4;
        const MAX_LEVEL = 5;

        // --- Oyun Durumu ---
        let player = {
            x: 50,
            y: GROUND_Y - PLAYER_SIZE,
            vy: 0,
            isJumping: false
        };

        let obstacles = [];
        let level = 1;
        let isGameOver = false;
        let gameLoopId;
        let gameStarted = false;

        // --- BÃ¶lÃ¼m TasarÄ±mlarÄ± (Platformlar ve Engeller) ---
        // Format: [x pozisyonu, y pozisyonu (yÃ¼ksek engel iÃ§in), geniÅŸlik, yÃ¼kseklik, tip ('block' veya 'spike' (Ã¼Ã§gen))]
        // x pozisyonu: BaÅŸlangÄ±Ã§tan ne kadar uzakta (oyun hÄ±zÄ±yla Ã§arpÄ±lacak)
        
        const levelData = [
            // Level 1: Temel ZÄ±plamalar
            [
                [200, GROUND_Y - 40, 30, 40, 'block'],
                [350, GROUND_Y - 40, 30, 40, 'block'],
                [550, GROUND_Y - 20, 20, 20, 'spike'],
                [700, GROUND_Y - 40, 30, 40, 'block'],
                [800, GROUND_Y - 20, 20, 20, 'spike'],
                [1000, GROUND_Y - 40, 30, 40, 'block'],
                [1200, GROUND_Y - 20, 20, 20, 'spike'],
                [1450, GROUND_Y - 40, 30, 40, 'block'],
                [1600, GROUND_Y - 20, 20, 20, 'spike'],
                [1800, GROUND_Y - 20, 20, 20, 'finish'] // BitiÅŸ
            ],
            // Level 2: Ã‡ift Engeller ve Platformlar
            [
                [200, GROUND_Y - 20, 20, 20, 'spike'],
                [230, GROUND_Y - 20, 20, 20, 'spike'],
                [400, GROUND_Y - 60, 50, 60, 'block'], // YÃ¼ksek Platform
                [600, GROUND_Y - 20, 20, 20, 'spike'],
                [630, GROUND_Y - 20, 20, 20, 'spike'],
                [800, GROUND_Y - 40, 30, 40, 'block'],
                [900, GROUND_Y - 20, 20, 20, 'spike'],
                [930, GROUND_Y - 20, 20, 20, 'spike'],
                [1200, GROUND_Y - 60, 50, 60, 'block'],
                [1400, GROUND_Y - 20, 20, 20, 'spike'],
                [1430, GROUND_Y - 20, 20, 20, 'spike'],
                [1600, GROUND_Y - 40, 30, 40, 'block'],
                [1800, GROUND_Y - 20, 20, 20, 'finish']
            ],
            // Level 3: KÄ±sa ZÄ±plama Gerektiren Engeller
            [
                [200, GROUND_Y - 20, 20, 20, 'spike'],
                [300, GROUND_Y - 20, 20, 20, 'spike'],
                [400, GROUND_Y - 20, 20, 20, 'spike'],
                [550, GROUND_Y - 40, 30, 40, 'block'],
                [700, GROUND_Y - 20, 20, 20, 'spike'],
                [750, GROUND_Y - 20, 20, 20, 'spike'],
                [900, GROUND_Y - 60, 50, 60, 'block'],
                [1100, GROUND_Y - 20, 20, 20, 'spike'],
                [1200, GROUND_Y - 20, 20, 20, 'spike'],
                [1300, GROUND_Y - 20, 20, 20, 'spike'],
                [1450, GROUND_Y - 40, 30, 40, 'block'],
                [1800, GROUND_Y - 20, 20, 20, 'finish']
            ],
            // Level 4: KarÄ±ÅŸÄ±k YÃ¼kseklik ve SÄ±klÄ±k
            [
                [200, GROUND_Y - 20, 20, 20, 'spike'],
                [250, GROUND_Y - 60, 50, 60, 'block'], // YÃ¼ksek Platform
                [400, GROUND_Y - 20, 20, 20, 'spike'],
                [430, GROUND_Y - 20, 20, 20, 'spike'],
                [500, GROUND_Y - 40, 30, 40, 'block'], // Orta Platform
                [650, GROUND_Y - 20, 20, 20, 'spike'],
                [800, GROUND_Y - 60, 50, 60, 'block'],
                [950, GROUND_Y - 20, 20, 20, 'spike'],
                [1000, GROUND_Y - 20, 20, 20, 'spike'],
                [1100, GROUND_Y - 40, 30, 40, 'block'],
                [1300, GROUND_Y - 20, 20, 20, 'spike'],
                [1330, GROUND_Y - 20, 20, 20, 'spike'],
                [1800, GROUND_Y - 20, 20, 20, 'finish']
            ],
            // Level 5: Zorlu Final
            [
                [200, GROUND_Y - 20, 20, 20, 'spike'],
                [230, GROUND_Y - 20, 20, 20, 'spike'],
                [260, GROUND_Y - 20, 20, 20, 'spike'],
                [400, GROUND_Y - 60, 50, 60, 'block'],
                [500, GROUND_Y - 20, 20, 20, 'spike'],
                [530, GROUND_Y - 20, 20, 20, 'spike'],
                [700, GROUND_Y - 40, 30, 40, 'block'],
                [850, GROUND_Y - 20, 20, 20, 'spike'],
                [880, GROUND_Y - 20, 20, 20, 'spike'],
                [1000, GROUND_Y - 80, 50, 80, 'block'], // Ã‡ok YÃ¼ksek Platform
                [1150, GROUND_Y - 20, 20, 20, 'spike'],
                [1300, GROUND_Y - 40, 30, 40, 'block'],
                [1450, GROUND_Y - 20, 20, 20, 'spike'],
                [1480, GROUND_Y - 20, 20, 20, 'spike'],
                [1800, GROUND_Y - 20, 20, 20, 'finish']
            ]
        ];

        // Engel OluÅŸturma Fonksiyonu
        function createObstacles(levelIndex) {
            obstacles = [];
            levelData[levelIndex - 1].forEach(data => {
                obstacles.push({
                    x: canvas.width + data[0], // EkranÄ±n dÄ±ÅŸÄ±ndan baÅŸla
                    y: data[1],
                    width: data[2],
                    height: data[3],
                    type: data[4],
                    initialX: data[0]
                });
            });
        }

        // Oyuncu ZÄ±plama Fonksiyonu
        function jump() {
            if (!player.isJumping) {
                player.vy = JUMP_VELOCITY;
                player.isJumping = true;
            }
        }

        // --- Ã‡izim FonksiyonlarÄ± ---

        function drawPlayer() {
            ctx.fillStyle = '#f39c12'; // Turuncu KÃ¼p
            ctx.fillRect(player.x, player.y, PLAYER_SIZE, PLAYER_SIZE);
        }

        function drawObstacles() {
            obstacles.forEach(obs => {
                if (obs.type === 'block') {
                    ctx.fillStyle = '#e74c3c'; // KÄ±rmÄ±zÄ± Platform
                    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                } else if (obs.type === 'spike') {
                    ctx.fillStyle = '#c0392b'; // Koyu KÄ±rmÄ±zÄ± Diken
                    ctx.beginPath();
                    // ÃœÃ§gen Ã§izimi
                    ctx.moveTo(obs.x, obs.y + obs.height); // Sol alt
                    ctx.lineTo(obs.x + obs.width / 2, obs.y); // Ãœst orta
                    ctx.lineTo(obs.x + obs.width, obs.y + obs.height); // SaÄŸ alt
                    ctx.closePath();
                    ctx.fill();
                } else if (obs.type === 'finish') {
                    ctx.fillStyle = '#2980b9'; // Mavi BitiÅŸ Ã‡izgisi
                    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                }
            });
        }

        function drawGround() {
            ctx.fillStyle = '#2ecc71'; // YeÅŸil Zemin
            ctx.fillRect(0, GROUND_Y, canvas.width, canvas.height - GROUND_Y);
        }

        // --- GÃ¼ncelleme FonksiyonlarÄ± ---

        function updatePlayer() {
            // YerÃ§ekimi
            player.vy += GRAVITY;
            player.y += player.vy;

            // Zemin KontrolÃ¼
            if (player.y + PLAYER_SIZE > GROUND_Y) {
                player.y = GROUND_Y - PLAYER_SIZE;
                player.vy = 0;
                player.isJumping = false;
            }
        }

        function updateObstacles() {
            obstacles.forEach(obs => {
                obs.x -= GAME_SPEED;
            });

            // Ekran dÄ±ÅŸÄ±na Ã§Ä±kan engelleri temizle (performans iÃ§in)
            obstacles = obstacles.filter(obs => obs.x + obs.width > 0);
        }

        // --- Ã‡arpÄ±ÅŸma KontrolÃ¼ ---
        function checkCollision() {
            for (let obs of obstacles) {
                // Basit AABB Ã§arpÄ±ÅŸma kontrolÃ¼
                if (
                    player.x < obs.x + obs.width &&
                    player.x + PLAYER_SIZE > obs.x &&
                    player.y < obs.y + obs.height &&
                    player.y + PLAYER_SIZE > obs.y
                ) {
                    if (obs.type === 'block' || obs.type === 'spike') {
                        // Engel veya Dikenle Ã§arpÄ±ÅŸma
                        gameOver(false);
                        return true;
                    } else if (obs.type === 'finish') {
                        // BitiÅŸ Ã§izgisi
                        levelComplete();
                        return true;
                    }
                }
            }
            return false;
        }

        // --- Oyun AkÄ±ÅŸÄ± FonksiyonlarÄ± ---

        function gameLoop() {
            if (isGameOver || !gameStarted) return;

            // 1. EkranÄ± Temizle
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 2. GÃ¼ncelle
            updatePlayer();
            updateObstacles();

            // 3. Ã‡arpÄ±ÅŸma KontrolÃ¼
            if (checkCollision()) {
                // Ã‡arpÄ±ÅŸma oldu, gameLoop durdu
                return;
            }

            // 4. Ã‡iz
            drawGround();
            drawObstacles();
            drawPlayer();

            // 5. DÃ¶ngÃ¼yÃ¼ Tekrarla
            gameLoopId = requestAnimationFrame(gameLoop);
        }

        // --- Olay Dinleyicileri ---
        function handleInput() {
            jump();
        }

        canvas.addEventListener('click', handleInput);

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') { // BoÅŸluk tuÅŸu
                e.preventDefault(); // SayfanÄ±n kaymasÄ±nÄ± engelle
                handleInput();
            }
        });

        // --- BaÅŸlatma/Bitirme FonksiyonlarÄ± ---

        function startGame() {
            startScreen.style.display = 'none';
            endScreen.style.display = 'none';
            isGameOver = false;
            gameStarted = true;
            level = 1;
            resetLevel();
            gameLoop();
        }

        function resetLevel() {
            cancelAnimationFrame(gameLoopId);
            player.x = 50;
            player.y = GROUND_Y - PLAYER_SIZE;
            player.vy = 0;
            player.isJumping = false;
            currentLevelSpan.textContent = level;
            createObstacles(level);
        }

        function levelComplete() {
            cancelAnimationFrame(gameLoopId);

            if (level < MAX_LEVEL) {
                level++;
                endMessage.textContent = `BÃ¶lÃ¼m ${level - 1} BaÅŸarÄ±lÄ±!`;
                endDetail.textContent = `HazÄ±r mÄ±sÄ±n? Devam etmek iÃ§in butona tÄ±kla! (BÃ¶lÃ¼m ${level})`;
                endScreen.style.display = 'flex';
                // Butonun iÅŸlevini bir sonraki bÃ¶lÃ¼me geÃ§ecek ÅŸekilde deÄŸiÅŸtir
                const nextButton = endScreen.querySelector('button');
                nextButton.textContent = `BÃ¶lÃ¼m ${level}'e GeÃ§`;
                nextButton.onclick = () => {
                    resetLevel();
                    endScreen.style.display = 'none';
                    gameLoop();
                };
            } else {
                // Oyun Bitti (Son BÃ¶lÃ¼m TamamlandÄ±)
                gameOver(true);
            }
        }

        function gameOver(isWin) {
            isGameOver = true;
            cancelAnimationFrame(gameLoopId);
            endScreen.style.display = 'flex';
            const nextButton = endScreen.querySelector('button');

            if (isWin) {
                endMessage.textContent = 'ðŸ¥³ Tebrikler! Oyunu KazandÄ±n!';
                endDetail.textContent = 'TÃ¼m 5 bÃ¶lÃ¼mÃ¼ de baÅŸarÄ±yla tamamladÄ±n. Sen bir Geometry Dash ustasÄ±sÄ±n!';
                nextButton.textContent = 'Tekrar Oyna';
                nextButton.onclick = restartGame;
            } else {
                endMessage.textContent = 'Game Over! ðŸ’¥';
                endDetail.textContent = `BÃ¶lÃ¼m ${level}'de kaldÄ±n. Engellere dikkat etmeliydin!`;
                nextButton.textContent = 'Tekrar Dene';
                nextButton.onclick = restartGame;
            }
        }

        function restartGame() {
            startGame(); // Oyunu baÅŸtan baÅŸlat
        }

    </script>
</body>
</html>
